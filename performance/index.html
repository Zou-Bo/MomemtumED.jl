<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Performance Guide · MomentumED.jl</title><meta name="title" content="Performance Guide · MomentumED.jl"/><meta property="og:title" content="Performance Guide · MomentumED.jl"/><meta property="twitter:title" content="Performance Guide · MomentumED.jl"/><meta name="description" content="Documentation for MomentumED.jl."/><meta property="og:description" content="Documentation for MomentumED.jl."/><meta property="twitter:description" content="Documentation for MomentumED.jl."/><meta property="og:url" content="https://Zou-Bo.github.io/MomentumED.jl/performance/"/><meta property="twitter:url" content="https://Zou-Bo.github.io/MomentumED.jl/performance/"/><link rel="canonical" href="https://Zou-Bo.github.io/MomentumED.jl/performance/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">MomentumED.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../api/">API Reference</a></li><li><a class="tocitem" href="../physics/">Physics Background</a></li><li><a class="tocitem" href="../examples/">Examples</a></li><li class="is-active"><a class="tocitem" href>Performance Guide</a><ul class="internal"><li><a class="tocitem" href="#Memory-Efficiency"><span>Memory Efficiency</span></a></li><li><a class="tocitem" href="#Computational-Efficiency"><span>Computational Efficiency</span></a></li><li><a class="tocitem" href="#KrylovKit-Integration"><span>KrylovKit Integration</span></a></li><li><a class="tocitem" href="#Multi-threading"><span>Multi-threading</span></a></li><li><a class="tocitem" href="#Algorithmic-Optimizations"><span>Algorithmic Optimizations</span></a></li><li><a class="tocitem" href="#Performance-Monitoring"><span>Performance Monitoring</span></a></li><li><a class="tocitem" href="#Scaling-Characteristics"><span>Scaling Characteristics</span></a></li><li><a class="tocitem" href="#Configuration-Options"><span>Configuration Options</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Performance Guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Performance Guide</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Zou-Bo/MomentumED.jl/blob/main/docs/src/performance.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Performance-Guide"><a class="docs-heading-anchor" href="#Performance-Guide">Performance Guide</a><a id="Performance-Guide-1"></a><a class="docs-heading-anchor-permalink" href="#Performance-Guide" title="Permalink"></a></h1><p>This document describes performance characteristics and optimization strategies implemented in the package.</p><h2 id="Memory-Efficiency"><a class="docs-heading-anchor" href="#Memory-Efficiency">Memory Efficiency</a><a id="Memory-Efficiency-1"></a><a class="docs-heading-anchor-permalink" href="#Memory-Efficiency" title="Permalink"></a></h2><h3 id="Bit-Based-State-Representation"><a class="docs-heading-anchor" href="#Bit-Based-State-Representation">Bit-Based State Representation</a><a id="Bit-Based-State-Representation-1"></a><a class="docs-heading-anchor-permalink" href="#Bit-Based-State-Representation" title="Permalink"></a></h3><p>The package uses bit-encoded many-body states to minimize memory usage:</p><pre><code class="language-julia hljs">struct MBS64{bits} &lt;: Integer
    n::UInt64  # 64-bit integer for up to 64 orbitals
end</code></pre><p><strong>Memory Usage</strong>: </p><ul><li>Each MBS64 state: 8 bytes (regardless of system size)</li><li>N-orbital system: N × 8 bytes for complete basis</li><li>Compared to explicit state vectors: significant memory reduction</li></ul><h3 id="Sparse-Matrix-Storage"><a class="docs-heading-anchor" href="#Sparse-Matrix-Storage">Sparse Matrix Storage</a><a id="Sparse-Matrix-Storage-1"></a><a class="docs-heading-anchor-permalink" href="#Sparse-Matrix-Storage" title="Permalink"></a></h3><p>Hamiltonian matrices use sparse storage.</p><h2 id="Computational-Efficiency"><a class="docs-heading-anchor" href="#Computational-Efficiency">Computational Efficiency</a><a id="Computational-Efficiency-1"></a><a class="docs-heading-anchor-permalink" href="#Computational-Efficiency" title="Permalink"></a></h2><h3 id="Momentum-Block-Division"><a class="docs-heading-anchor" href="#Momentum-Block-Division">Momentum Block Division</a><a id="Momentum-Block-Division-1"></a><a class="docs-heading-anchor-permalink" href="#Momentum-Block-Division" title="Permalink"></a></h3><p>The package reduces computational complexity through momentum conservation:</p><pre><code class="language-julia hljs"># Divide Hilbert space into momentum blocks
blocks, block_k1, block_k2, k0number = ED_momentum_block_division(para, mbs_list)</code></pre><h3 id="Scattering-Formalism"><a class="docs-heading-anchor" href="#Scattering-Formalism">Scattering Formalism</a><a id="Scattering-Formalism-1"></a><a class="docs-heading-anchor-permalink" href="#Scattering-Formalism" title="Permalink"></a></h3><p>Hamiltonian construction uses scattering terms:</p><pre><code class="language-julia hljs"># Generate sorted scattering lists
scat_list1 = ED_sortedScatteringList_onebody(para)
scat_list2 = ED_sortedScatteringList_twobody(para)</code></pre><p><strong>Advantages</strong>:</p><ul><li>Avoids explicit matrix element storage</li><li>Efficient term generation and sorting</li><li>Automatic Hermitian symmetry handling</li></ul><h2 id="KrylovKit-Integration"><a class="docs-heading-anchor" href="#KrylovKit-Integration">KrylovKit Integration</a><a id="KrylovKit-Integration-1"></a><a class="docs-heading-anchor-permalink" href="#KrylovKit-Integration" title="Permalink"></a></h2><h3 id="Sparse-Eigenvalue-Solvers"><a class="docs-heading-anchor" href="#Sparse-Eigenvalue-Solvers">Sparse Eigenvalue Solvers</a><a id="Sparse-Eigenvalue-Solvers-1"></a><a class="docs-heading-anchor-permalink" href="#Sparse-Eigenvalue-Solvers" title="Permalink"></a></h3><p>The package uses KrylovKit for efficient sparse diagonalization:</p><pre><code class="language-julia hljs"># Krylov subspace methods
vals, vecs, info = eigsolve(H, vec0, N_eigen, :SR, ishermitian=true)</code></pre><p><strong>Performance Benefits</strong>:</p><ul><li>Only computes requested eigenvalues (not full spectrum)</li><li>Memory-efficient for large sparse matrices</li><li>Iterative methods with configurable convergence</li></ul><h3 id="Convergence-Control"><a class="docs-heading-anchor" href="#Convergence-Control">Convergence Control</a><a id="Convergence-Control-1"></a><a class="docs-heading-anchor-permalink" href="#Convergence-Control" title="Permalink"></a></h3><pre><code class="language-julia hljs"># Convergence monitoring and warnings
if !(info.converged == true || info.converged == 1)
    @warn &quot;Eigensolver did not converge. Residual norm: $(info.normres)&quot;
end</code></pre><p><strong>Features</strong>:</p><ul><li>Automatic convergence detection</li><li>Residual norm monitoring</li><li>Configurable tolerance levels</li></ul><h2 id="Multi-threading"><a class="docs-heading-anchor" href="#Multi-threading">Multi-threading</a><a id="Multi-threading-1"></a><a class="docs-heading-anchor-permalink" href="#Multi-threading" title="Permalink"></a></h2><h3 id="Parallel-Hamiltonian-Construction"><a class="docs-heading-anchor" href="#Parallel-Hamiltonian-Construction">Parallel Hamiltonian Construction</a><a id="Parallel-Hamiltonian-Construction-1"></a><a class="docs-heading-anchor-permalink" href="#Parallel-Hamiltonian-Construction" title="Permalink"></a></h3><p>The package supports multi-threaded matrix construction:</p><pre><code class="language-julia hljs"># Threaded sparse matrix assembly
H = HmltMatrix_threaded(block, scat_list1, scat_list2, multi_thread)</code></pre><p><strong>Implementation</strong>:</p><ul><li>Julia Threads.@threads for parallelization thread-local matrix construction</li><li>Final assembly with thread safety</li></ul><p><strong>Performance Scaling</strong>:</p><ul><li>Linear scaling with number of CPU cores</li><li>Automatic thread pool management</li></ul><h3 id="Efficient-Data-Structures"><a class="docs-heading-anchor" href="#Efficient-Data-Structures">Efficient Data Structures</a><a id="Efficient-Data-Structures-1"></a><a class="docs-heading-anchor-permalink" href="#Efficient-Data-Structures" title="Permalink"></a></h3><p>Key data structure choices:</p><ul><li><strong>Vectors</strong> for dynamic collections</li><li><strong>Tuples</strong> for fixed-size indexing</li><li><strong>ComplexF64</strong> for quantum amplitudes</li><li><strong>UInt64</strong> for bit operations</li></ul><h2 id="Algorithmic-Optimizations"><a class="docs-heading-anchor" href="#Algorithmic-Optimizations">Algorithmic Optimizations</a><a id="Algorithmic-Optimizations-1"></a><a class="docs-heading-anchor-permalink" href="#Algorithmic-Optimizations" title="Permalink"></a></h2><h3 id="Sorted-Scattering-Lists"><a class="docs-heading-anchor" href="#Sorted-Scattering-Lists">Sorted Scattering Lists</a><a id="Sorted-Scattering-Lists-1"></a><a class="docs-heading-anchor-permalink" href="#Sorted-Scattering-Lists" title="Permalink"></a></h3><p>Scattering terms are sorted and merged.</p><p><strong>Benefits</strong>:</p><ul><li>Eliminates duplicate terms</li><li>Enables efficient term lookup</li><li>Improves cache locality</li></ul><h2 id="Performance-Monitoring"><a class="docs-heading-anchor" href="#Performance-Monitoring">Performance Monitoring</a><a id="Performance-Monitoring-1"></a><a class="docs-heading-anchor-permalink" href="#Performance-Monitoring" title="Permalink"></a></h2><h3 id="Timing-Information"><a class="docs-heading-anchor" href="#Timing-Information">Timing Information</a><a id="Timing-Information-1"></a><a class="docs-heading-anchor-permalink" href="#Timing-Information" title="Permalink"></a></h3><p>The package includes timing capabilities:</p><pre><code class="language-julia hljs"># Enable timing output
energies, eigenvectors = EDsolve(block, scat_list1, scat_list2, N_eigen; showtime=true)</code></pre><p><strong>Output</strong>:</p><ul><li>Matrix construction time</li><li>Diagonalization time</li></ul><h3 id="Convergence-Monitoring"><a class="docs-heading-anchor" href="#Convergence-Monitoring">Convergence Monitoring</a><a id="Convergence-Monitoring-1"></a><a class="docs-heading-anchor-permalink" href="#Convergence-Monitoring" title="Permalink"></a></h3><p>Track eigensolver convergence:</p><pre><code class="language-julia hljs"># Enable convergence warnings
energies, eigenvectors = EDsolve(block, scat_list1, scat_list2, N_eigen; converge_warning=true)</code></pre><p><strong>Features</strong>:</p><ul><li>Residual norm reporting</li><li>Convergence failure warnings</li><li>Automatic fallback strategies</li></ul><h2 id="Scaling-Characteristics"><a class="docs-heading-anchor" href="#Scaling-Characteristics">Scaling Characteristics</a><a id="Scaling-Characteristics-1"></a><a class="docs-heading-anchor-permalink" href="#Scaling-Characteristics" title="Permalink"></a></h2><h3 id="System-Size-Scaling"><a class="docs-heading-anchor" href="#System-Size-Scaling">System Size Scaling</a><a id="System-Size-Scaling-1"></a><a class="docs-heading-anchor-permalink" href="#System-Size-Scaling" title="Permalink"></a></h3><p>The package scales with:</p><ul><li><strong>Orbitals</strong>: Up to 64 (bit encoding limit)</li><li><strong>Particles</strong>: Limited by combinatorial growth</li><li><strong>Momentum blocks</strong>: Number depends on system symmetry</li></ul><h3 id="Memory-Scaling"><a class="docs-heading-anchor" href="#Memory-Scaling">Memory Scaling</a><a id="Memory-Scaling-1"></a><a class="docs-heading-anchor-permalink" href="#Memory-Scaling" title="Permalink"></a></h3><p>Typical memory usage:</p><ul><li><strong>State storage</strong>: O(N_states × 8 bytes)</li><li><strong>Hamiltonian</strong>: O(N_nonzero × sizeof(ComplexF64))</li><li><strong>Eigenvectors</strong>: O(N<em>states × N</em>eigen × sizeof(ComplexF64))</li></ul><h3 id="Computational-Scaling"><a class="docs-heading-anchor" href="#Computational-Scaling">Computational Scaling</a><a id="Computational-Scaling-1"></a><a class="docs-heading-anchor-permalink" href="#Computational-Scaling" title="Permalink"></a></h3><p>Diagonalization complexity:</p><ul><li><strong>Full diagonalization</strong>: O(d³) where d is block dimension</li><li><strong>Krylov methods</strong>: O(d × N_eigen × iterations)</li><li><strong>Matrix construction</strong>: O(N<em>terms × N</em>states)</li></ul><h2 id="Configuration-Options"><a class="docs-heading-anchor" href="#Configuration-Options">Configuration Options</a><a id="Configuration-Options-1"></a><a class="docs-heading-anchor-permalink" href="#Configuration-Options" title="Permalink"></a></h2><h3 id="Thread-Control"><a class="docs-heading-anchor" href="#Thread-Control">Thread Control</a><a id="Thread-Control-1"></a><a class="docs-heading-anchor-permalink" href="#Thread-Control" title="Permalink"></a></h3><p>Configure multi-threading usage:</p><pre><code class="language-julia hljs"># Enable/disable multi-threading
energies, eigenvectors = EDsolve(block, scat_list1, scat_list2, N_eigen; multi_thread=true)</code></pre><h3 id="Convergence-Settings"><a class="docs-heading-anchor" href="#Convergence-Settings">Convergence Settings</a><a id="Convergence-Settings-1"></a><a class="docs-heading-anchor-permalink" href="#Convergence-Settings" title="Permalink"></a></h3><p>Control eigensolver behavior:</p><pre><code class="language-julia hljs"># Convergence and warning settings
energies, eigenvectors = EDsolve(block, scat_list1, scat_list2, N_eigen; 
                                  converge_warning=true, showtime=false)</code></pre><h3 id="Memory-Optimization"><a class="docs-heading-anchor" href="#Memory-Optimization">Memory Optimization</a><a id="Memory-Optimization-1"></a><a class="docs-heading-anchor-permalink" href="#Memory-Optimization" title="Permalink"></a></h3><p>Optimize memory usage patterns:</p><ul><li>Use appropriate block sizes</li><li>Limit number of requested eigenvalues</li><li>Enable memory-efficient sparse formats</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../examples/">« Examples</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Wednesday 10 September 2025 17:19">Wednesday 10 September 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
